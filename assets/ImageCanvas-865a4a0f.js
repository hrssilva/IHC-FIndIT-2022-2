import{_ as h,o as c,c as g,a as o}from"./index-1fd2e2ff.js";var s=(t=>(t[t.Normal=0]="Normal",t[t.Hovered=1]="Hovered",t[t.Selected=2]="Selected",t))(s||{}),l=(t=>(t[t.point=0]="point",t[t.house=1]="house",t[t.building=2]="building",t[t.room=3]="room",t[t.stairs=4]="stairs",t[t.elevator=5]="elevator",t[t.door=6]="door",t[t.parking=7]="parking",t[t.bus=8]="bus",t[t.taxi=9]="taxi",t[t.store=10]="store",t[t.bank=11]="bank",t[t.restaurant=12]="restaurant",t[t.market=13]="market",t[t.pharmacy=14]="pharmacy",t[t.hospital=15]="hospital",t[t.school=16]="school",t[t.park=17]="park",t[t.gas=18]="gas",t[t.lab=19]="lab",t[t.tech=20]="tech",t[t.library=21]="library",t[t.help=22]="help",t))(l||{});const m=5,S=2;var u=(t=>(t[t.InitialInfoStep=0]="InitialInfoStep",t[t.CreateNodesStep=1]="CreateNodesStep",t[t.SelectNodesStep=2]="SelectNodesStep",t[t.IntermediateNodesStep=3]="IntermediateNodesStep",t[t.ChooseQRCodesStep=4]="ChooseQRCodesStep",t[t.SelectSourceStep=5]="SelectSourceStep",t))(u||{});const d={data(){return{imageWidth:0,imageHeight:0}},mounted(){new ResizeObserver(i=>{this.$refs.img&&(this.imageWidth=this.$refs.img.clientWidth,this.imageHeight=this.$refs.img.clientHeight,this.$nextTick(()=>{this.draw()}))}).observe(this.$refs.img),this.draw()},emits:{click:t=>!0,mousemove:t=>!0},props:{nodes:{type:Array,default:()=>[]},edges:{type:Array,default:()=>[]},onlySelected:Boolean,onlyEditing:Boolean,onlyReal:Boolean,image:String},computed:{nodesFiltered(){return!this.onlySelected&&!this.onlyReal?this.nodes:this.nodes.filter(t=>(!this.onlySelected||t.state===s.Selected)&&(!this.onlyReal||t.type!==l.point))},edgesFiltered(){return this.onlyEditing?this.edges.filter(t=>t.editing):this.edges}},methods:{draw(){const t=this.$refs.canvas;if(!t)return;const i=t.getContext("2d");i&&(i.clearRect(0,0,t.width,t.height),this.drawNodes(i),this.drawEdges(i))},drawNodes(t){this.nodesFiltered.forEach(({x:i,y:e,state:n})=>{switch(n){case s.Hovered:t.fillStyle="#888888";break;case s.Selected:t.fillStyle="#0000ff";break;default:t.fillStyle="#000000"}t.beginPath(),t.arc(this.toCoordinateX(i),this.toCoordinateY(e),m,0,2*Math.PI),t.fill(),t.stroke()})},drawEdges(t){t.fillStyle="#000000",this.edgesFiltered.forEach(({start:i,end:e})=>{i.map===e.map&&(t.beginPath(),t.moveTo(this.toCoordinateX(this.nodes[i.node].x),this.toCoordinateY(this.nodes[i.node].y)),t.lineTo(this.toCoordinateX(this.nodes[e.node].x),this.toCoordinateY(this.nodes[e.node].y)),t.stroke())})},toCoordinateX(t){return t*this.$refs.canvas.width},toCoordinateY(t){return t*this.$refs.canvas.height}}};const f={class:"image-container"},v=["width","height"],b=["src"];function C(t,i,e,n,a,k){return c(),g("div",f,[o("canvas",{class:"imageCanvas",width:a.imageWidth,height:a.imageHeight,ref:"canvas"},null,8,v),o("img",{src:e.image,ref:"img",onClick:i[0]||(i[0]=r=>t.$emit("click",r)),onMousemove:i[1]||(i[1]=r=>t.$emit("mousemove",r))},null,40,b)])}const I=h(d,[["render",C]]);export{S as H,I,l as N,m as R,s as a,u as b};
